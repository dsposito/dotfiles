#!/usr/bin/env bash

# Ask for the administrator password upfront.
sudo -v

# Keep-alive: update existing `sudo` time stamp until `.osx` has finished.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &


# === OPERATING SYSTEM ===

# Automatically hide and show the Dock.
defaults write com.apple.dock autohide -bool true

# Use scroll gesture with the Ctrl (^) modifier key to zoom.
defaults write com.apple.universalaccess closeViewScrollWheelToggle -bool true
defaults write com.apple.universalaccess HIDScrollZoomModifierMask -int 262144

# Set a blazingly fast keyboard repeat rate.
defaults write NSGlobalDomain KeyRepeat -int 0

# Enable full keyboard access for all controls.
# (e.g. enable Tab in modal dialogs)
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3

# Add iOS Simulator to Launchpad.
sudo ln -sf "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app" "/Applications/iOS Simulator.app"

# Save to disk (not to iCloud) by default.
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false


# === APPLICATIONS ===

# Disable inline attachments (just show the icons).
defaults write com.apple.mail DisableInlineAttachmentViewing -bool true

# Use plain text mode for new TextEdit documents.
defaults write com.apple.TextEdit RichText -int 0

# Finder: show hidden files by default.
defaults write com.apple.finder AppleShowAllFiles -bool true

# Finder: use column view by default.
# Four-letter codes for the other view modes: `icnv`, `Nlsv`, `Flwv`
defaults write com.apple.finder FXPreferredViewStyle -string "clmv"

# Finder: show status bar.
defaults write com.apple.finder ShowStatusBar -bool true

# Finder: show path bar.
defaults write com.apple.finder ShowPathbar -bool true
